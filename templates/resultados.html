<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resultados del Estudiante</title>

 <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Estilos personalizados -->
    <style>
        body {
            padding-top: 60px;
            background-color: #f8f9fa;
        }
        .dashboard-header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
            border-radius: 8px;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-danger {
            border-left: 5px solid #e74c3c;
        }
        .card-success {
            border-left: 5px solid #2ecc71;
        }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .btn-return {
            background-color: #3498db;
            color: white;
            font-weight: 500;
        }
        .btn-return:hover {
            background-color: #2980b9;
        }
    </style>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  {% include 'navbar.html' %}

  <!-- Evita que la NavBar tape el contenido -->
  <div class="container mt-5 pt-5">
    <h1 class="text-center">Resultados del Estudiante</h1>

    <h3>Resumen de tus respuestas:</h3>
    <ul class="list-group mb-4">
        <li class="list-group-item"><strong>Comprensión en clase:</strong> {{ comprension }}</li>
        <li class="list-group-item"><strong>Emoción al ir a la escuela:</strong> {{ emocion_general }}</li>
        <li class="list-group-item"><strong>Frecuencia de estrés por estudios:</strong> {{ estres_estudios }}</li>
        <li class="list-group-item"><strong>Apoyo familiar:</strong> {{ apoyo_familiar }}</li>
        <li class="list-group-item"><strong>¿Tiene amistades en la escuela?:</strong> {{ amistades_escuela }}</li>
        <li class="list-group-item"><strong>Relación con profesores:</strong> {{ relacion_profesores }}</li>
        <li class="list-group-item"><strong>Responsabilidades fuera de la escuela:</strong> {{ responsabilidades }}</li>
        <li class="list-group-item"><strong>Valor que da a lo que aprende:</strong> {{ valor_educacion }}</li>
        <li class="list-group-item"><strong>Probabilidad de terminar el ciclo escolar:</strong> {{ probabilidad_terminar }}</li>
    </ul>

    <h3>Visualización gráfica:</h3>
    <canvas id="graficoResultados" width="400" height="250" class="mb-4"></canvas>

    <a href="{{ url_for('formulario') }}" class="btn btn-primary">← Volver al formulario</a>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Chart.js lógica -->
  <script>
    const comprension = Number("{{ comprension }}");
    const estres = Number("{{ estres_estudios }}");
    const apoyo = Number("{{ apoyo_familiar }}");
    const relacion = Number("{{ relacion_profesores }}");
    const terminar = Number("{{ probabilidad_terminar }}");

    const ctx = document.getElementById('graficoResultados').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [
                'Comprensión',
                'Estrés',
                'Apoyo Familiar',
                'Relación con Profesores',
                'Probabilidad de Terminar'
            ],
            datasets: [{
                label: 'Puntuación (1 a 5)',
                data: [comprension, estres, apoyo, relacion, terminar],
                backgroundColor: [
                    '#4CAF50',
                    '#FF9800',
                    '#2196F3',
                    '#9C27B0',
                    '#F44336'
                ]
            }]
        },
        options: {
            scales: {
                y: {
                    suggestedMin: 0,
                    suggestedMax: 5
                }
            }
        }
    });
  </script>
</body>
</html>
